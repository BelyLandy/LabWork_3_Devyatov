# Лабораторная работа 1. Работу выполнил Девятов Денис Сергеевич БПИ-238.

## Описание проекта
Этот проект реализует механику игры 2048. В коде присутствуют три основных компонента:
- **Cell** – модель клетки, содержащая её состояние и события при изменении данных.
- **CellView** – визуальное представление клетки, подписывающееся на события модели.
- **GameField** – игровое поле, управляющее клетками и их размещением.

---

## Класс Cell

### Хранение состояния
Класс `Cell` содержит:
- `_position` – координаты клетки в сетке.
- `_value` – числовое значение клетки.
- `_merged` – флаг, указывающий на участие в слиянии.

### Свойства с событиями
Свойства `Value` и `Position` реализованы с вызовом событий:
- `OnValueChanged` – вызывается при изменении значения клетки.
- `OnPositionChanged` – вызывается при изменении позиции.

Это позволяет `CellView` подписываться на изменения и обновлять отображение.

### События
Использование событий `Action<int>` и `Action<Vector2Int>` обеспечивает связь между моделью и представлением.

### Инициализация
Конструктор `Cell(Vector2Int position, int value)` принимает стартовые параметры, создавая клетку с заданной позицией и значением.

---

## Компонент CellView

### Отображение модели
`CellView` отвечает за визуализацию клетки. Включает:
- Ссылку на `TextMeshProUGUI` для вывода числа.
- Публичное поле `cellSize` для расчёта позиции в мировых координатах.

### Инициализация
Метод `Init(Cell cell)` привязывает `CellView` к `Cell`, подписываясь на события:
- `UpdateValue(int newValue)` – обновляет текст на основе степени двойки.
- `UpdatePosition(Vector2Int newPosition)` – обновляет позицию объекта на сцене.

### Обработка событий
Подписка на события позволяет динамически обновлять отображение клетки. В `OnDisable` подписки очищаются, предотвращая утечки памяти.

### Расширяемость
Метод `UpdateColor()` пока что является заглушкой, но в дальнейшем может использоваться для изменения цвета клетки в зависимости от её значения.

---

## Компонент GameField

### Инициализация игрового поля
`GameField` отвечает за управление игровым процессом. Метод `InitializeGrid()` создаёт сетку, добавляя клетки со значением 0.

### Поиск пустой клетки
Метод `GetEmptyPosition()` проходит по списку клеток и выбирает случайную пустую позицию, необходимую для создания новых клеток.

### Создание новой клетки
Метод `CreateCell()` выполняет:
1. Вызов `GetEmptyPosition()` для поиска свободного места.
2. Генерацию нового значения (1 с вероятностью 90%, 2 – с 10%).
3. Обновление найденной клетки новым значением.
4. Создание префаба клетки через `Instantiate` и её инициализацию в `CellView`.
5. Проверку наличия `CellView` и вывод ошибки, если он отсутствует.
